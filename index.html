<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ç”Ÿæ—¥å¿«ä¹ ğŸ‚</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {margin:0; padding:0; height:100%; font-family:"PingFang SC","Segoe UI",sans-serif; overflow:hidden;}
body {background:linear-gradient(120deg,#ff7eb3,#ff758c,#ffb347,#ffcc33); background-size:400% 400%; animation:bgMove 15s ease infinite; display:flex; align-items:center; justify-content:center;}
@keyframes bgMove{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

/* å…¥å£é¡µç‰¹æ•ˆ+ç¾åŒ–ï¼ˆæ–°å¢æ˜Ÿå…‰ç‰¹æ•ˆï¼‰ */
#enterPage{position:absolute; inset:0; display:flex; align-items:center; justify-content:center;}
.enter-box{
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(16px);
  padding:50px 40px;
  border-radius:24px;
  text-align:center;
  color:#fff;
  width:280px;
  box-shadow:0 10px 30px rgba(0,0,0,0.2);
  border:1px solid rgba(255,255,255,0.3);
  animation:float 3s ease-in-out infinite;
  position: relative;
  z-index: 10;
}
@keyframes float{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-10px);}
}
.enter-box h2{
  margin:0 0 30px 0;
  font-size:26px;
  text-shadow:0 2px 10px rgba(0,0,0,0.2);
  text-shadow:0 0 10px #fff, 0 0 20px #fff;
}
#enterEffects{
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}

input{
  width:100%;
  padding:12px 15px;
  border-radius:12px;
  border:2px solid rgba(255,255,255,0.5);
  margin:20px 0;
  font-size:18px;
  letter-spacing:4px;
  background:rgba(255,255,255,0.1);
  color:#fff;
  outline:none;
  transition:all 0.3s ease;
}
input::placeholder{
  color:rgba(255,255,255,0.7);
  letter-spacing:2px;
}
input:focus{
  border-color:#fff;
  box-shadow:0 0 15px rgba(255,255,255,0.5);
}

/* å…¨å±€æŒ‰é’®ç¾åŒ–ï¼ˆä¼˜åŒ–æ¸å˜å’Œå…‰æ™•ï¼‰ */
button{
  background:linear-gradient(45deg,#ff6a88,#ff99ac);
  border:none;
  border-radius:50px;
  padding:12px 30px;
  color:#fff;
  font-size:16px;
  cursor:pointer;
  margin:5px 0;
  transition:all 0.3s ease;
  box-shadow:0 4px 15px rgba(255,106,136,0.4);
  position:relative;
  overflow:hidden;
}
button::after{
  content:"";
  position:absolute;
  top:-50%;
  left:-50%;
  width:200%;
  height:200%;
  background:rgba(255,255,255,0.1);
  transform:rotate(45deg);
  transition:all 0.6s ease;
}
button:hover{
  transform:scale(1.05);
  box-shadow:0 6px 20px rgba(255,106,136,0.6);
}
button:hover::after{
  left:150%;
}

/* å€’è®¡æ—¶ç‰¹æ•ˆ+ç¾åŒ–ï¼ˆæ–°å¢æ˜Ÿå…‰ç‰¹æ•ˆï¼‰ */
#countdown{
  display:none; 
  text-align:center; 
  color:#fff; 
  font-size:42px; 
  margin:30px 0; 
  flex-direction:column; 
  align-items:center; 
  gap:30px; 
  width:100%;
  padding:0 20px;
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(10px);
  border-radius:24px;
  padding:40px 20px;
  border:1px solid rgba(255,255,255,0.2);
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
  position: relative;
  z-index: 10;
}
#countdown div:first-child{
  margin-bottom:20px;
  font-size:36px;
  text-shadow:0 2px 10px rgba(0,0,0,0.2);
  animation:breath 3s ease-in-out infinite;
}
@keyframes breath{
  0%,100%{opacity:0.8; transform:scale(1);}
  50%{opacity:1; transform:scale(1.05);}
}
#countdownEffects{
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}
.flip-container{display:flex; gap:20px; justify-content:center;}
.flip-unit{
  position:relative; 
  width:100px; 
  height:120px; 
  perspective:1500px; 
  background:rgba(0,0,0,0.2);
  border-radius:12px;
  border:2px solid rgba(255,255,255,0.3);
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
}
.flip-unit span{
  display:block; 
  position:absolute; 
  width:100%; 
  height:50%; 
  background:rgba(0,0,0,0.4); 
  color:#fff; 
  line-height:60px; 
  font-size:52px; 
  text-align:center; 
  border-radius:8px;
  text-shadow:0 4px 8px rgba(0,0,0,0.5); 
}
.flip-unit .top{top:0; transform-origin:bottom; backface-visibility:hidden;}
.flip-unit .bottom{bottom:0; transform-origin:top; backface-visibility:hidden;}
.flip-unit.flip .top{animation:flipTop 0.6s ease-in-out forwards;}
.flip-unit.flip .bottom{animation:flipBottom 0.6s ease-in-out forwards;}
@keyframes flipTop{0%{transform:rotateX(0deg);}100%{transform:rotateX(-90deg);}}
@keyframes flipBottom{0%{transform:rotateX(90deg);}100%{transform:rotateX(0deg);}}

/* è´ºå¡ï¼ˆä¿æŒåŸæœ‰å¸ƒå±€ï¼Œæ–°å¢æ˜Ÿå…‰ç‰¹æ•ˆå®¹å™¨ï¼‰ */
#cardPage{position:absolute; inset:0; display:none; flex-direction:row; 
  align-items:center; justify-content:center; gap:60px; 
  padding:20px;}
#cardEffects{
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}
.card{display:flex; flex-direction:column; align-items:center; justify-content:center; background:rgba(0,0,0,0.35); color:#fff; backdrop-filter:blur(16px); border-radius:24px; padding:30px; width:400px; max-height:85vh; overflow-y:auto; position:relative;}
.card::-webkit-scrollbar{width:4px;}
.card::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.3); border-radius:2px;}

/* æ ¸å¿ƒä¿®æ”¹ï¼šä¸»ç…§ç‰‡é»‘è‰²èƒŒæ™¯+å…‰æ™•å‘¼å¸+æ¸å˜è¾¹æ¡†åŠ¨ç”» */
.main-photo{
  width: 260px; height: 260px;
  border-radius: 50%;
  object-fit: contain;
  background: #000; /* ç™½è‰²æ”¹ä¸ºé»‘è‰²åº•è‰² */
  border: 5px solid transparent; /* é€æ˜è¾¹æ¡†ç”¨äºæ¸å˜ */
  border-image: linear-gradient(45deg, #ff7eb3, #ffcc33) 1;
  animation: 
    borderRotate 8s linear infinite, /* è¾¹æ¡†æ¸å˜æ—‹è½¬ */
    glowBreath 3s ease-in-out infinite; /* å…‰æ™•å‘¼å¸ */
  margin-bottom: 20px;
  box-shadow: 0 0 20px rgba(255,126,179,0.5); /* ç²‰è‰²å…‰æ™• */
  cursor: zoom-in;
  transition: transform 0.3s ease;
}
@keyframes borderRotate {
  0% { border-image-source: linear-gradient(45deg, #ff7eb3, #ffcc33); }
  50% { border-image-source: linear-gradient(45deg, #ffcc33, #ff7eb3); }
  100% { border-image-source: linear-gradient(45deg, #ff7eb3, #ffcc33); }
}
@keyframes glowBreath {
  0%,100% { box-shadow: 0 0 20px rgba(255,126,179,0.3); }
  50% { box-shadow: 0 0 30px rgba(255,126,179,0.8); }
}
.main-photo:hover{transform:scale(1.05);}

/* å·¦å³å¯¹ç§°ç…§ç‰‡ï¼šç‚¹å‡»æ”¾å¤§ï¼ˆä¼˜åŒ–hoverå…‰æ™•ï¼‰ */
.left-photos-outer, .right-photos-outer{display:flex; flex-direction:column; gap:20px; 
  width:160px;}
.left-photos-outer .photo, .right-photos-outer .photo{width:100%; height:160px; 
  object-fit:cover; border-radius:16px;
  border:4px solid rgba(255,255,255,0.5);
  box-shadow:0 6px 12px rgba(0,0,0,0.3);
  opacity:1; transform:translateY(0);
  cursor: zoom-in;
  transition: all 0.3s ease;
}
.left-photos-outer .photo:hover, .right-photos-outer .photo:hover{
  transform:scale(1.05);
  border-color: #fff;
  box-shadow:0 0 20px rgba(255,126,179,0.6);
}

/* æ–‡å­—é»˜è®¤ç™½è‰²ï¼Œæ¸…æ™°å¯è§ */
.message{margin:0 20px; max-width:400px; text-align:center;}
.message p{
  opacity:0; 
  transform:translateY(12px); 
  transition:opacity 1s ease, transform 1s ease; 
  margin:8px 0; 
  line-height:1.8; 
  text-shadow:0 2px 6px rgba(0,0,0,0.5);
  color:#fff; 
  font-size:18px;
}
.message p.show{
  opacity:1; 
  transform:translateY(0);
}

/* éŸ³é‡æ§åˆ¶æŒ‰é’®ï¼ˆä¼˜åŒ–hoverå…‰æ™•ï¼‰ */
.volume-control{
  position: fixed; bottom: 30px; right: 30px;
  width: 50px; height: 50px;
  border-radius: 50%;
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(10px);
  border: 2px solid #fff;
  display: flex; align-items:center; justify-content:center;
  cursor: pointer;
  z-index: 100;
  transition: all 0.3s ease;
}
.volume-control:hover{
  background: rgba(255,255,255,0.4);
  box-shadow:0 0 15px rgba(255,255,255,0.8);
}
.volume-control svg{width: 24px; height: 24px; fill: #fff;}

/* ç…§ç‰‡æ”¾å¤§é¢„è§ˆå¼¹çª—ï¼ˆæ–°å¢æ·¡å…¥æ·¡å‡ºåŠ¨ç”»ï¼‰ */
#photoModal{
  position: fixed; inset:0; background: rgba(0,0,0,0.9);
  display: none; align-items:center; justify-content:center;
  z-index: 200;
  animation: modalFadeIn 0.3s ease-out;
}
@keyframes modalFadeIn {
  0% { opacity: 0; }
  100% { opacity: 1; }
}
#modalImg{max-width: 80%; max-height: 80vh; border: 5px solid #fff; border-radius: 10px;}
#closeModal{
  position: absolute; top: 30px; right: 30px;
  color: #fff; font-size: 30px; cursor: pointer;
  transition: all 0.3s ease;
}
#closeModal:hover{
  transform:scale(1.2);
  color: #ff7eb3;
}

/* ç”Ÿæ—¥ç¥ç¦å¼¹çª—ï¼ˆæ–°å¢å½©å…‰è¾¹æ¡†åŠ¨ç”»ï¼‰ */
#wishModal{
  position: fixed; inset:0; background: rgba(0,0,0,0.7);
  display: none; align-items:center; justify-content:center;
  z-index: 300;
}
.wish-box{
  background: linear-gradient(120deg, #ff7eb3, #ffcc33);
  padding: 40px; border-radius: 20px;
  text-align: center;
  color: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  animation: 
    float 3s ease-in-out infinite,
    wishGlow 2s ease-in-out infinite; /* å½©å…‰è¾¹æ¡†åŠ¨ç”» */
}
@keyframes wishGlow {
  0%,100% { box-shadow: 0 0 20px rgba(255,126,179,0.5); }
  50% { box-shadow: 0 0 30px rgba(255,204,51,0.8); }
}
.wish-box h2{margin-top:0; font-size: 32px;}
.wish-box button{margin-top: 20px; padding: 10px 30px;}

/* æ¼‚æµ®çˆ±å¿ƒç‰¹æ•ˆ */
.heart{
  position: absolute; width: 20px; height: 20px;
  background: #ff4d94; border-radius: 50% 50% 0 50%;
  transform: rotate(45deg);
  opacity: 0;
  animation: heartFloat 6s ease-in-out infinite;
}
@keyframes heartFloat{
  0%{transform: rotate(45deg) translateY(100vh); opacity: 0;}
  10%{opacity: 1;}
  90%{opacity: 1;}
  100%{transform: rotate(45deg) translateY(-20vh); opacity: 0;}
}

/* çƒŸèŠ±ç‰¹æ•ˆæ ·å¼ */
.firework{
  position: absolute;
  width: 8px;
  height: 8px;
  background: hsl(calc(var(--hue)*1deg), 100%, 60%);
  border-radius: 50%;
  opacity: 0;
  animation: fireworkBurst 2s ease-in-out infinite;
}
@keyframes fireworkBurst {
  0% {
    opacity: 1;
    transform: scale(0.5) translateY(0);
  }
  20% {
    transform: scale(1) translateY(-30px);
  }
  50% {
    opacity: 1;
    transform: scale(1.5) translateY(-80px);
  }
  100% {
    opacity: 0;
    transform: scale(0.8) translateY(-120px);
  }
}

/* è›‹ç³•ç²’å­ç‰¹æ•ˆæ ·å¼ */
.cakeParticle{
  position: absolute;
  width: 12px;
  height: 12px;
  background: url('img/cake.png') no-repeat center/contain;
  opacity: 0;
  animation: cakeFloat 3s ease-in-out infinite;
}
@keyframes cakeFloat {
  0% {
    opacity: 0;
    transform: translateY(100vh) rotate(0deg);
  }
  20% {
    opacity: 1;
  }
  50% {
    transform: translateY(50vh) rotate(180deg);
  }
  100% {
    opacity: 0;
    transform: translateY(-20vh) rotate(360deg);
  }
}

/* æ–°å¢ï¼šæ˜Ÿå…‰ç‚¹ç¼€ç‰¹æ•ˆï¼ˆå…¨é¡µé¢é€šç”¨ï¼‰ */
.starDot{
  position: absolute;
  width: 4px;
  height: 4px;
  background: #fff;
  border-radius: 50%;
  opacity: 0.5;
  animation: starTwinkle 4s ease-in-out infinite;
}
@keyframes starTwinkle {
  0%,100% { opacity: 0.3; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.2); }
}

/* åŸæœ‰ç‰¹æ•ˆä¿ç•™ */
.cake{position:absolute;width:40px;height:40px;background:url('img/cake.png') no-repeat center/contain; animation: floatCake 6s ease-in-out infinite;}
@keyframes floatCake{
  0%{transform:translate(-50px,-50px) rotate(0deg);opacity:0;}
  10%{opacity:1;}
  50%{transform:translate(50px,30vh) rotate(180deg);opacity:1;}
  100%{transform:translate(-30px,100vh) rotate(360deg);opacity:0;}
}
.particle{position:absolute;width:12px;height:12px;border-radius:50%;opacity:0.8;animation:sparkle 3s ease-in-out infinite;}
@keyframes sparkle{
  0%{transform:scale(0.5) translate(0,0);opacity:1;}
  50%{transform:scale(1.8) translate(-40px,-80px);opacity:0.6;}
  100%{transform:scale(0.5) translate(80px,-20px);opacity:0;}
}
.ribbon{position:absolute;width:6px;height:40px;background:linear-gradient(to bottom,#ff6a88,#ff99ac); animation: floatRibbon 8s ease-in-out infinite;}
@keyframes floatRibbon{
  0%,100%{transform:translate(100px,-50px) rotate(0deg);}
  50%{transform:translate(-80px,50vh) rotate(180deg);}
}
.star{position:absolute;width:6px;height:6px;background:#fff;border-radius:50%;opacity:0.8;animation: twinkle 2s ease-in-out infinite;}
@keyframes twinkle{
  0%,100%{opacity:0;transform:scale(0.5);}
  50%{opacity:1;transform:scale(1.5);}
}
.gift{position:absolute;width:50px;height:50px;top:80vh; left:45vw; background:url('img/gift.png') no-repeat center/contain; 
  cursor:pointer; animation: jumpGift 2.5s ease-in-out infinite;}
@keyframes jumpGift{
  0%,100%{transform:translateY(0) scale(1);}
  50%{transform:translateY(-25px) scale(1.1);}
}
</style>
</head>
<body>

<!-- å…¥å£é¡µ+ç‰¹æ•ˆå®¹å™¨ -->
<div id="enterPage">
  <div id="enterEffects"></div>
  <div class="enter-box">
    <h2>ğŸ è¾“å…¥ç”Ÿæ—¥</h2>
    <input type="text" id="birthday" placeholder="ä¾‹å¦‚ 0113" maxlength="4">
    <button onclick="enterBirthday()">å¼€å§‹</button>
  </div>
</div>

<!-- å€’è®¡æ—¶é¡µ+ç‰¹æ•ˆå®¹å™¨ -->
<div id="countdown">
  <div id="countdownEffects"></div>
  <div>è·ç¦»ä½ çš„ç”Ÿæ—¥è¿˜æœ‰ï¼š</div>
  <div class="flip-container">
    <div class="flip-unit"><span class="top" id="daysTop">00</span><span class="bottom" id="daysBottom">00</span></div>
    <div class="flip-unit"><span class="top" id="hoursTop">00</span><span class="bottom" id="hoursBottom">00</span></div>
    <div class="flip-unit"><span class="top" id="minutesTop">00</span><span class="bottom" id="minutesBottom">00</span></div>
    <div class="flip-unit"><span class="top" id="secondsTop">00</span><span class="bottom" id="secondsBottom">00</span></div>
  </div>
  <button onclick="showCard()">æå‰çœ‹ ğŸ‰</button>
</div>

<!-- è´ºå¡+ç‰¹æ•ˆå®¹å™¨ -->
<div id="cardPage">
  <div id="cardEffects"></div>
  <div class="left-photos-outer">
    <img src="img/è½¦1.png" class="photo" onclick="openModal(this.src)">
    <img src="img/è½¦4.png" class="photo" onclick="openModal(this.src)">
    <img src="img/é£1.png" class="photo" onclick="openModal(this.src)">
    <img src="img/äºº.png" class="photo" onclick="openModal(this.src)">
  </div>

  <div class="card">
    <img src="img/photo1.jpg" class="main-photo" onclick="openModal(this.src)" alt="ä¸»ç…§ç‰‡">
    <div class="message" id="message">
      <p>ç”Ÿæ—¥å¿«ä¹ã€‚</p>
      <p>åœ¨æ–°çš„ä¸€å²é‡Œï¼Œ</p>
      <p>ä¸å†å®³æ€•è¢«è¾œè´Ÿï¼Œ</p>
      <p>ä¹Ÿä¸å¿…ä¸€ä¸‹å­ç›¸ä¿¡è°ã€‚</p>
      <p>ä½ å¯ä»¥æ…¢æ…¢è¯´ï¼Œ</p>
      <p>æˆ‘æ„¿æ„æ…¢æ…¢å¬ã€‚</p>
      <p>æ²Ÿé€šä¸æ˜¯è§£é‡Šï¼Œ</p>
      <p>æ˜¯è®©å½¼æ­¤å®‰å¿ƒã€‚</p>
      <p>ç¥ä½ æ¯å¤©éƒ½æ¸©æš–æ˜äº® âœ¨</p>
    </div>
  </div>

  <div class="right-photos-outer">
    <img src="img/è½¦2.png" class="photo" onclick="openModal(this.src)">
    <img src="img/è½¦3.png" class="photo" onclick="openModal(this.src)">
    <img src="img/é£2.png" class="photo" onclick="openModal(this.src)">
    <img src="img/é£3.png" class="photo" onclick="openModal(this.src)">
  </div>
</div>

<!-- éŸ³é‡æ§åˆ¶æŒ‰é’® -->
<div class="volume-control" onclick="toggleVolume()">
  <svg viewBox="0 0 24 24">
    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
  </svg>
</div>

<!-- ç…§ç‰‡æ”¾å¤§å¼¹çª— -->
<div id="photoModal">
  <span id="closeModal" onclick="closeModal()">Ã—</span>
  <img id="modalImg" src="" alt="æ”¾å¤§ç…§ç‰‡">
</div>

<!-- ç”Ÿæ—¥ç¥ç¦å¼¹çª— -->
<div id="wishModal">
  <div class="wish-box">
    <h2>ç”Ÿæ—¥å¿«ä¹ï¼ğŸ¥³</h2>
    <p>æ„¿ä½ å²å²å¸¸æ¬¢æ„‰ï¼Œå¹´å¹´çš†èƒœæ„ï¼</p>
    <button onclick="closeWishModal()">ç¡®å®š</button>
  </div>
</div>

<!-- èƒŒæ™¯éŸ³ä¹ -->
<audio id="bgm" loop preload="auto">
    <source src="img/æ¨æ˜Šæ˜† - é‡èŠ±è°·.mp3" type="audio/mpeg">
    <source src="img/bgm.ogg" type="audio/ogg">


<script>
const bgm=document.getElementById("bgm");
let isMuted = false;
// é¡µé¢ç‚¹å‡»æ’­æ”¾éŸ³ä¹
document.addEventListener("click",()=>{
    bgm.play().catch(()=>{});
},{once:true});

// ç”ŸæˆçƒŸèŠ±ã€è›‹ç³•ç²’å­ã€æ˜Ÿå…‰çš„é€šç”¨å‡½æ•°
function createEffects(containerId, countFirework, countCake, countStar) {
  const container=document.getElementById(containerId);
  if (!container) return;
  
  // æ¸…ç©ºæ—§ç‰¹æ•ˆï¼Œé¿å…å åŠ å¡é¡¿
  container.innerHTML = '';

  // ç”ŸæˆçƒŸèŠ±ç‰¹æ•ˆ
  for (let i=0; i < countFirework; i++) {
    const firework=document.createElement('div');
    firework.className = 'firework';
    firework.style.setProperty('--hue', Math.random()*360);
    firework.style.left = `${Math.random()*100}vw`;
    firework.style.top = `${Math.random()*80}vh`;
    firework.style.animationDelay = `${Math.random()*2}s`;
    container.appendChild(firework);
  }

  // ç”Ÿæˆè›‹ç³•ç²’å­ç‰¹æ•ˆ
  for (let i=0; i < countCake; i++) {
    const cake=document.createElement('div');
    cake.className = 'cakeParticle';
    cake.style.left = `${Math.random()*100}vw`;
    cake.style.animationDelay = `${Math.random()*3}s`;
    container.appendChild(cake);
  }

  // æ–°å¢ï¼šç”Ÿæˆæ˜Ÿå…‰ç‚¹ç¼€ç‰¹æ•ˆ
  for (let i=0; i < countStar; i++) {
    const star=document.createElement('div');
    star.className = 'starDot';
    star.style.left = `${Math.random()*100}vw`;
    star.style.top = `${Math.random()*100}vh`;
    star.style.animationDelay = `${Math.random()*4}s`;
    container.appendChild(star);
  }
}

// é¡µé¢åŠ è½½åå¯åŠ¨ç™»å½•é¡µç‰¹æ•ˆ
window.addEventListener('load', () => {
  createEffects('enterEffects', 20, 10, 50); // ç™»å½•é¡µï¼šçƒŸèŠ±20+è›‹ç³•10+æ˜Ÿå…‰50
});

// è¾“å…¥ç”Ÿæ—¥éªŒè¯+å¯åŠ¨å€’è®¡æ—¶ç‰¹æ•ˆ
function enterBirthday(){
    const date=document.getElementById("birthday").value.trim();
    if(date !== "0113"){alert("è¯·è¾“å…¥æ­£ç¡®ç”Ÿæ—¥ ğŸ‚"); return;}
    document.getElementById("enterPage").style.display="none";
    document.getElementById("countdown").style.display="flex";
    bgm.play();
    // å¯åŠ¨å€’è®¡æ—¶é¡µç‰¹æ•ˆ
    createEffects('countdownEffects', 30, 15, 60); // å€’è®¡æ—¶é¡µï¼šçƒŸèŠ±30+è›‹ç³•15+æ˜Ÿå…‰60
    startCountdown();
}

// å€’è®¡æ—¶é€»è¾‘
function startCountdown(){
    function updateCountdown(){
        const now=new Date();
        let year=now.getFullYear();
        const birthday=new Date(year,0,13,0,0,0); 
        if(birthday<now) year+=1;
        const nextBirthday=new Date(year,0,13,0,0,0);
        const diff=nextBirthday-now;
        if(diff<=0){showCard(); clearInterval(timer); return;}
        const days=Math.floor(diff/(1000*60*60*24));
        const hours=Math.floor((diff/(1000*60*60))%24);
        const minutes=Math.floor((diff/(1000*60))%60);
        const seconds=Math.floor((diff/1000)%60);
        updateFlip("days",days); 
        updateFlip("hours",hours); 
        updateFlip("minutes",minutes); 
        updateFlip("seconds",seconds);
    }
    updateCountdown();
    const timer=setInterval(updateCountdown,1000);
}

function updateFlip(unit,value){
    const targetValue=value.toString().padStart(2,'0');
    const top=document.getElementById(unit+"Top");
    const bottom=document.getElementById(unit+"Bottom");
    if(top.textContent===targetValue) return;
    
    top.textContent=targetValue;
    bottom.textContent=targetValue;
    
    const container=top.parentElement;
    container.classList.remove("flip");
    void container.offsetWidth;
    container.classList.add("flip");
    
    setTimeout(()=>{
        container.classList.remove("flip");
    },600);
}

// æ˜¾ç¤ºè´ºå¡+å¯åŠ¨è´ºå¡ç‰¹æ•ˆ
function showCard(){
    document.getElementById("countdown").style.display="none";
    const card=document.getElementById("cardPage");
    card.style.display="flex";
    
    // å¯åŠ¨è´ºå¡é¡µç‰¹æ•ˆï¼ˆæ˜Ÿå…‰æ›´å¤šï¼ŒçƒŸèŠ±å’Œè›‹ç³•é€‚ä¸­ï¼‰
    createEffects('cardEffects', 15, 10, 80);

    // ä¸»ç…§ç‰‡æ¸æ˜¾
    document.querySelectorAll(".main-photo").forEach((p,i)=>{
        setTimeout(()=>{
            p.style.opacity="1"; 
            p.style.transform="translateY(0)";
        },i*300);
    });
    
    // æ–‡å­—é€è¡Œæ˜¾ç¤º
    document.querySelectorAll(".message p").forEach((line,i)=>{
        setTimeout(()=>{
            line.classList.add("show");
        }, i*500);
    });
    
    // ç”Ÿæˆç‰¹æ•ˆ+çˆ±å¿ƒ
    createCakes(6); 
    createParticles(30); 
    createRibbons(15); 
    createStars(20); 
    createGift();
    createHearts(10);
    
    // æ˜¾ç¤ºç¥ç¦å¼¹çª—
    setTimeout(()=>{
        document.getElementById("wishModal").style.display="flex";
    },1000);
}

// éŸ³é‡æ§åˆ¶
function toggleVolume(){
    isMuted = !isMuted;
    bgm.muted = isMuted;
}

// ç…§ç‰‡æ”¾å¤§å¼¹çª—
function openModal(src){
    document.getElementById("photoModal").style.display="flex";
    document.getElementById("modalImg").src=src;
    document.body.style.overflow="hidden";
}
function closeModal(){
    document.getElementById("photoModal").style.display="none";
    document.body.style.overflow="auto";
}

// å…³é—­ç¥ç¦å¼¹çª—
function closeWishModal(){
    document.getElementById("wishModal").style.display="none";
}

// ç‰¹æ•ˆç”Ÿæˆå‡½æ•°
function createCakes(num){
    for(let i=0;i<num;i++){
        const c=document.createElement("div");
        c.className="cake";
        c.style.left=Math.random()*100+"vw";
        c.style.animationDelay=(i*0.8)+"s";
        document.body.appendChild(c);
    }
}
function createParticles(num){
    for(let i=0;i<num;i++){
        const p=document.createElement("div");
        p.className="particle";
        p.style.left=Math.random()*100+"vw";
        p.style.top=Math.random()*50+"vh";
        p.style.background="hsl("+Math.random()*360+",100%,70%)";
        p.style.animationDelay=(i*0.2)+"s";
        document.body.appendChild(p);
    }
}
function createRibbons(num){
    for(let i=0;i<num;i++){
        const r=document.createElement("div");
        r.className="ribbon";
        r.style.left=Math.random()*100+"vw";
        r.style.animationDelay=(i*0.5)+"s";
        document.body.appendChild(r);
    }
}
function createStars(num){
    for(let i=0;i<num;i++){
        const s=document.createElement("div");
        s.className="star";
        s.style.left=Math.random()*100+"vw";
        s.style.top=Math.random()*50+"vh";
        s.style.animationDelay=(i*0.3)+"s";
        document.body.appendChild(s);
    }
}
function createGift(){
    const g=document.createElement("div");
    g.className="gift";
    g.style.left=Math.random()*80+"vw";
    g.style.top="80vh";
    g.addEventListener("click",()=>{
        alert("ğŸ ç”Ÿæ—¥å¿«ä¹ï¼ç»™ä½ çš„å°æƒŠå–œï¼");
    });
    document.body.appendChild(g);
}

// ç”Ÿæˆæ¼‚æµ®çˆ±å¿ƒ
function createHearts(num){
    for(let i=0;i<num;i++){
        const h=document.createElement("div");
        h.className="heart";
        h.style.left=Math.random()*100+"vw";
        h.style.animationDelay=(i*0.5)+"s";
        h.style.animationDuration=(3+Math.random()*6)+"s";
        document.body.appendChild(h);
    }
}
</script>

</body>
</html>